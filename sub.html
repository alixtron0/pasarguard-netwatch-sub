<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user.username }} // NETWATCH</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* ═══════════════════════════════════════════════════════
           CYBERPUNK 2077 - NETWATCH PROTOCOL
           Color Palette & CSS Variables
           ═══════════════════════════════════════════════════════ */
        :root {
            /* Core backgrounds */
            --bg-deep: #06080f;
            --bg-base: #0a0e17;
            --bg-card: rgba(13, 17, 27, 0.85);
            --bg-elevated: rgba(15, 20, 35, 0.9);
            --bg-input: rgba(8, 12, 22, 0.7);
            --bg-overlay: rgba(0, 0, 0, 0.7);
            /* Neon colors */
            --cyan: #00f0ff;
            --cyan-dim: #0ea5e9;
            --cyan-glow: rgba(0, 240, 255, 0.3);
            --magenta: #ff2d6f;
            --magenta-glow: rgba(255, 45, 111, 0.3);
            --yellow: #f0e130;
            --yellow-glow: rgba(240, 225, 48, 0.25);
            --green: #00ff9d;
            --green-glow: rgba(0, 255, 157, 0.25);
            --red: #ff3333;
            --red-glow: rgba(255, 51, 51, 0.25);
            --purple: #a855f7;
            /* Text */
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --text-muted: #636370;
            /* Borders */
            --border-default: rgba(0, 240, 255, 0.12);
            --border-hover: rgba(0, 240, 255, 0.3);
            --border-accent: rgba(255, 45, 111, 0.2);
            /* Spacing & Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            /* Font */
            --font-mono: 'Courier New', 'Cascadia Code', 'Fira Code', monospace;
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-farsi: 'Vazirmatn', 'Tahoma', 'Arial', sans-serif;
        }

        /* ═══ RESET ═══ */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        /* ═══ BODY ═══ */
        body {
            font-family: var(--font-sans);
            background: var(--bg-deep);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
            overflow-x: hidden;
        }
        body[lang="fa"] { font-family: var(--font-farsi); }
        body[lang="en"] { font-family: var(--font-sans); }

        /* ═══ SCANLINE OVERLAY ═══ */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 240, 255, 0.015) 2px,
                rgba(0, 240, 255, 0.015) 4px
            );
            pointer-events: none;
            z-index: 9999;
        }

        /* ═══ DATA STREAM CANVAS ═══ */
        #dataStreamCanvas {
            position: fixed;
            inset: 0;
            z-index: 0;
            opacity: 0.06;
            pointer-events: none;
        }

        /* ═══ SCROLLBAR ═══ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-deep); }
        ::-webkit-scrollbar-thumb { background: rgba(0, 240, 255, 0.2); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--cyan-dim); }

        /* ═══ SELECTION ═══ */
        ::selection { background: rgba(0, 240, 255, 0.25); color: var(--cyan); }

        /* ═══ LANGUAGE TOGGLE ═══ */
        .lang-toggle {
            position: fixed;
            top: 16px;
            inset-inline-start: 16px;
            z-index: 1000;
            display: flex;
            gap: 2px;
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            padding: 3px;
            backdrop-filter: blur(10px);
        }
        .lang-toggle__btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            padding: 5px 14px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.78rem;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.2s;
            font-family: var(--font-mono);
        }
        .lang-toggle__btn.active {
            background: var(--cyan);
            color: var(--bg-deep);
            box-shadow: 0 0 12px var(--cyan-glow);
        }
        .lang-toggle__btn:hover:not(.active) {
            color: var(--cyan);
        }

        /* ═══ MAIN CONTAINER ═══ */
        .cyber-container {
            position: relative;
            z-index: 1;
            max-width: 820px;
            margin: 0 auto;
            padding: 60px 16px 40px;
        }

        /* ═══ PAGE HEADER ═══ */
        .page-header {
            text-align: center;
            margin-bottom: 28px;
            position: relative;
        }
        .page-header__corner {
            position: absolute;
            top: -8px;
            inset-inline-start: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--cyan);
            box-shadow: 0 0 12px var(--cyan-glow);
        }
        [dir="rtl"] .page-header__corner { transform: translateX(50%); }
        .page-header__title {
            font-family: var(--font-mono);
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--cyan);
            letter-spacing: 3px;
            text-transform: uppercase;
            text-shadow: 0 0 20px var(--cyan-glow), 0 0 40px rgba(0, 240, 255, 0.1);
            padding-top: 12px;
        }
        body[lang="fa"] .page-header__title {
            font-family: var(--font-farsi);
            letter-spacing: 0;
            font-size: 1.5rem;
        }
        .page-header__subtitle {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 6px;
            letter-spacing: 2px;
        }
        .page-header__line {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--cyan-dim), transparent);
            margin-top: 16px;
            opacity: 0.4;
        }

        /* ═══ GLITCH EFFECT ═══ */
        .glitch-active {
            animation: glitchText 0.3s steps(2, end);
        }
        @keyframes glitchText {
            0% { text-shadow: 2px 0 var(--magenta), -2px 0 var(--cyan); transform: translate(0); }
            25% { text-shadow: -2px 0 var(--magenta), 2px 0 var(--cyan); transform: translate(2px, -1px); }
            50% { text-shadow: 2px 2px var(--magenta), -1px -2px var(--cyan); transform: translate(-1px, 2px); }
            75% { text-shadow: -2px -1px var(--magenta), 1px 2px var(--cyan); transform: translate(1px, -2px); }
            100% { text-shadow: 0 0 20px var(--cyan-glow); transform: translate(0); }
        }

        /* ═══ TYPING CURSOR ═══ */
        .typing-cursor {
            display: none;
            width: 2px;
            height: 1.2em;
            background: var(--cyan);
            margin-inline-start: 2px;
            vertical-align: text-bottom;
            animation: cursorBlink 0.7s step-end infinite;
        }
        @keyframes cursorBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* ═══ CYBER SECTION ═══ */
        .cyber-section {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            margin-bottom: 20px;
            overflow: hidden;
            backdrop-filter: blur(8px);
            transition: border-color 0.3s;
        }
        .cyber-section:hover {
            border-color: var(--border-hover);
        }
        .cyber-section__header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 18px 10px;
            border-bottom: 1px solid var(--border-default);
        }
        .cyber-section__icon {
            color: var(--cyan);
            font-size: 0.7rem;
        }
        .cyber-section__title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--cyan);
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-family: var(--font-mono);
        }
        body[lang="fa"] .cyber-section__title {
            font-family: var(--font-farsi);
            letter-spacing: 0;
            text-transform: none;
        }
        .cyber-section__body {
            padding: 16px 18px 20px;
        }

        /* ═══ INFO GRID ═══ */
        .info-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .info-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            background: var(--bg-input);
            border-radius: var(--radius-sm);
            border: 1px solid transparent;
            transition: border-color 0.2s;
        }
        .info-row:hover {
            border-color: var(--border-default);
        }
        .info-row__label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 0.82rem;
            font-weight: 500;
            min-width: 120px;
        }
        .info-row__label-icon {
            color: var(--cyan-dim);
            font-size: 0.65rem;
        }
        .info-row__value {
            color: var(--text-primary);
            font-size: 0.85rem;
            text-align: end;
            font-family: var(--font-mono);
        }
        body[lang="fa"] .info-row__value {
            font-family: var(--font-farsi);
        }

        /* ═══ STATUS BADGES ═══ */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 3px 10px;
            border-radius: var(--radius-sm);
            font-size: 0.72rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }
        .status-badge__dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
        }
        .status-badge--active {
            background: rgba(0, 255, 157, 0.15);
            color: var(--green);
            border: 1px solid rgba(0, 255, 157, 0.3);
        }
        .status-badge--active .status-badge__dot {
            background: var(--green);
            box-shadow: 0 0 6px var(--green-glow);
            animation: dotPulse 2s ease-in-out infinite;
        }
        .status-badge--limited {
            background: rgba(255, 51, 51, 0.15);
            color: var(--red);
            border: 1px solid rgba(255, 51, 51, 0.3);
        }
        .status-badge--limited .status-badge__dot { background: var(--red); }
        .status-badge--expired {
            background: rgba(240, 225, 48, 0.15);
            color: var(--yellow);
            border: 1px solid rgba(240, 225, 48, 0.3);
        }
        .status-badge--expired .status-badge__dot { background: var(--yellow); }
        .status-badge--disabled {
            background: rgba(99, 99, 112, 0.15);
            color: var(--text-muted);
            border: 1px solid rgba(99, 99, 112, 0.3);
        }
        .status-badge--disabled .status-badge__dot { background: var(--text-muted); }
        .status-badge--on_hold {
            background: rgba(168, 85, 247, 0.15);
            color: var(--purple);
            border: 1px solid rgba(168, 85, 247, 0.3);
        }
        .status-badge--on_hold .status-badge__dot { background: var(--purple); }

        @keyframes dotPulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 4px var(--green-glow); }
            50% { opacity: 0.5; box-shadow: 0 0 10px var(--green-glow); }
        }

        /* ═══ PROGRESS BAR ═══ */
        .progress-container {
            margin: 12px 0 4px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .progress-bar-bg {
            flex: 1;
            height: 8px;
            background: var(--bg-input);
            border-radius: 4px;
            overflow: hidden;
            border: 1px solid var(--border-default);
        }
        .progress-bar-fill {
            height: 100%;
            width: 0;
            border-radius: 4px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .progress-bar-fill.green {
            background: linear-gradient(90deg, var(--green), var(--cyan));
            box-shadow: 0 0 10px var(--green-glow);
        }
        .progress-bar-fill.yellow {
            background: linear-gradient(90deg, var(--yellow), #fbbf24);
            box-shadow: 0 0 10px var(--yellow-glow);
        }
        .progress-bar-fill.red {
            background: linear-gradient(90deg, var(--red), var(--magenta));
            box-shadow: 0 0 10px var(--red-glow);
        }
        .progress-label {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--text-secondary);
            min-width: 42px;
            text-align: end;
        }

        /* ═══ INFINITY SYMBOL ═══ */
        .infinity {
            font-size: 1.2em;
            color: var(--cyan);
        }

        /* ═══ DAYS REMAINING ═══ */
        .days-remaining {
            color: var(--yellow);
            font-size: 0.78rem;
            font-weight: 500;
        }

        /* ═══ RESET TAG ═══ */
        .reset-tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.7rem;
            color: var(--text-muted);
            background: var(--bg-overlay);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            margin-inline-start: 6px;
        }

        /* ═══ LINKS SECTION ═══ */
        .link-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .link-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--bg-input);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            padding: 6px 10px;
            transition: border-color 0.2s;
        }
        .link-item:hover {
            border-color: var(--border-hover);
        }
        .link-item__index {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--cyan-dim);
            min-width: 18px;
            text-align: center;
        }
        .link-item__input {
            flex: 1;
            min-width: 0;
            border: none;
            background: transparent;
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 0.78rem;
            outline: none;
            padding: 4px 0;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        .link-item__actions {
            display: flex;
            gap: 6px;
            flex-shrink: 0;
        }

        /* ═══ BUTTONS ═══ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 6px 14px;
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
            transition: all 0.2s;
            font-family: var(--font-mono);
            white-space: nowrap;
        }
        body[lang="fa"] .btn {
            font-family: var(--font-farsi);
            letter-spacing: 0;
        }
        .btn--cyan {
            background: rgba(0, 240, 255, 0.1);
            color: var(--cyan);
            border-color: rgba(0, 240, 255, 0.25);
        }
        .btn--cyan:hover {
            background: rgba(0, 240, 255, 0.2);
            box-shadow: 0 0 15px var(--cyan-glow);
        }
        .btn--yellow {
            background: rgba(240, 225, 48, 0.1);
            color: var(--yellow);
            border-color: rgba(240, 225, 48, 0.25);
        }
        .btn--yellow:hover {
            background: rgba(240, 225, 48, 0.2);
            box-shadow: 0 0 15px var(--yellow-glow);
        }
        .btn--primary {
            background: var(--cyan);
            color: var(--bg-deep);
            border-color: var(--cyan);
        }
        .btn--primary:hover {
            background: #33f3ff;
            box-shadow: 0 0 20px var(--cyan-glow);
        }
        .btn--full { width: 100%; }

        .copy-all-wrapper {
            margin-top: 12px;
        }

        /* ═══ APPS SECTION ═══ */
        .apps-section__title {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 18px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--cyan);
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-family: var(--font-mono);
            border-bottom: 1px solid var(--border-default);
        }
        body[lang="fa"] .apps-section__title {
            font-family: var(--font-farsi);
            letter-spacing: 0;
            text-transform: none;
        }
        /* ═══ APP PLATFORM GROUP ═══ */
        .platform-group {
            margin-bottom: 16px;
        }
        .platform-group:last-child {
            margin-bottom: 0;
        }
        .platform-group__header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 18px;
            margin-bottom: 12px;
            border-bottom: 1px solid var(--border-default);
        }
        .platform-group__icon {
            font-size: 1.1rem;
        }
        .platform-group__name {
            font-family: var(--font-mono);
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--magenta);
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }
        body[lang="fa"] .platform-group__name {
            font-family: var(--font-farsi);
            letter-spacing: 0;
            text-transform: none;
        }
        .platform-group__count {
            font-family: var(--font-mono);
            font-size: 0.68rem;
            color: var(--text-muted);
            background: var(--bg-input);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-default);
        }
        .platform-group__grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 12px;
            padding: 0 18px;
        }

        /* ═══ APP CARD ═══ */
        .app-card {
            background: var(--bg-input);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-md);
            padding: 16px;
            position: relative;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            min-height: 220px;
        }
        .app-card:hover {
            border-color: var(--border-hover);
            box-shadow: 0 4px 20px rgba(0, 240, 255, 0.08);
        }
        .app-card--recommended {
            border-color: var(--yellow);
            box-shadow: 0 0 8px var(--yellow-glow);
        }
        .app-card--recommended::before {
            content: '';
            position: absolute;
            top: 0;
            inset-inline-start: 0;
            width: 3px;
            height: 100%;
            background: var(--yellow);
            border-radius: var(--radius-md) 0 0 var(--radius-md);
        }
        [dir="ltr"] .app-card--recommended::before {
            border-radius: var(--radius-md) 0 0 var(--radius-md);
        }
        [dir="rtl"] .app-card--recommended::before {
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
        }
        .app-card__header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        .app-card__icon {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            object-fit: cover;
            border: 1px solid var(--border-default);
        }
        .app-card__meta { flex: 1; }
        .app-card__name {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        .app-card__recommended-tag {
            font-size: 0.65rem;
            color: var(--yellow);
            background: rgba(240, 225, 48, 0.12);
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            margin-inline-start: 6px;
            font-weight: 500;
        }
        .app-card__platform {
            display: inline-block;
            font-size: 0.7rem;
            color: var(--text-muted);
            background: rgba(0, 240, 255, 0.08);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            margin-top: 4px;
            text-transform: capitalize;
        }
        .app-card__body {
            flex: 1;
        }
        .app-card__desc {
            color: var(--text-secondary);
            font-size: 0.8rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        .app-card__downloads-title {
            font-size: 0.78rem;
            color: var(--text-secondary);
            font-weight: 500;
            margin-bottom: 6px;
        }
        .app-card__links {
            list-style: none;
            padding: 0;
        }
        .app-card__links li {
            margin-bottom: 4px;
        }
        .app-card__links a {
            color: var(--cyan-dim);
            text-decoration: none;
            font-size: 0.78rem;
            font-weight: 500;
            transition: color 0.2s;
        }
        .app-card__links a:hover {
            color: var(--cyan);
            text-decoration: underline;
        }
        .app-card__footer {
            margin-top: auto;
            padding-top: 12px;
        }
        .app-card__import-btn {
            width: 100%;
            padding: 8px;
            background: rgba(0, 240, 255, 0.1);
            color: var(--cyan);
            border: 1px solid rgba(0, 240, 255, 0.25);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.78rem;
            transition: all 0.2s;
            font-family: inherit;
        }
        .app-card__import-btn:hover {
            background: rgba(0, 240, 255, 0.2);
            box-shadow: 0 0 15px var(--cyan-glow);
        }

        /* ═══ QR MODAL ═══ */
        .qr-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        .qr-overlay.visible {
            display: flex;
        }
        .qr-modal {
            background: var(--bg-elevated);
            border: 1px solid var(--border-hover);
            border-radius: var(--radius-lg);
            padding: 24px;
            position: relative;
            box-shadow: 0 0 40px var(--cyan-glow), 0 20px 60px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        .qr-modal__close {
            position: absolute;
            top: 10px;
            inset-inline-end: 10px;
            background: rgba(255, 45, 111, 0.1);
            border: 1px solid rgba(255, 45, 111, 0.3);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--magenta);
            font-size: 1rem;
            transition: all 0.2s;
        }
        .qr-modal__close:hover {
            background: rgba(255, 45, 111, 0.2);
            box-shadow: 0 0 10px var(--magenta-glow);
        }
        .qr-modal__title {
            font-family: var(--font-mono);
            color: var(--cyan);
            font-size: 0.85rem;
            margin-bottom: 16px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }
        #qrCodeContainer {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 256px;
        }
        #qrCodeContainer img {
            border-radius: var(--radius-md);
            border: 2px solid var(--border-default);
        }

        /* ═══ SUPPORT BOX ═══ */
        .support-box {
            background: var(--bg-card);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            backdrop-filter: blur(8px);
            transition: border-color 0.3s;
        }
        .support-box:hover {
            border-color: rgba(0, 136, 204, 0.4);
        }
        .support-box__icon {
            font-size: 1.8rem;
            margin-bottom: 8px;
            display: block;
        }
        .support-box__title {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }
        .support-box__link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 24px;
            background: rgba(0, 136, 204, 0.12);
            color: #29b6f6;
            border: 1px solid rgba(0, 136, 204, 0.3);
            border-radius: var(--radius-md);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.2s;
            font-family: var(--font-mono);
        }
        body[lang="fa"] .support-box__link {
            font-family: var(--font-farsi);
        }
        .support-box__link:hover {
            background: rgba(0, 136, 204, 0.22);
            box-shadow: 0 0 20px rgba(0, 136, 204, 0.25);
        }
        .support-box__link svg {
            width: 18px;
            height: 18px;
            fill: #29b6f6;
        }

        /* ═══ NEON PULSE ANIMATION ═══ */
        @keyframes neonPulse {
            0%, 100% { box-shadow: 0 0 5px var(--cyan-glow); }
            50% { box-shadow: 0 0 20px var(--cyan-glow), 0 0 40px rgba(0, 240, 255, 0.08); }
        }

        /* ═══ RESPONSIVE: TABLET ═══ */
        @media screen and (max-width: 768px) {
            .cyber-container {
                padding: 56px 10px 32px;
            }
            .page-header__title {
                font-size: 1.2rem;
                letter-spacing: 1.5px;
            }
            body[lang="fa"] .page-header__title {
                font-size: 1.15rem;
            }
            .cyber-section__body {
                padding: 12px 14px 16px;
            }
            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 4px;
            }
            .info-row__value {
                text-align: start;
                width: 100%;
            }
            .link-item {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }
            .link-item__actions {
                justify-content: stretch;
            }
            .link-item__actions .btn {
                flex: 1;
            }
            .platform-group__grid {
                grid-template-columns: 1fr;
                padding: 0 14px;
            }
            .lang-toggle {
                top: 10px;
                inset-inline-start: 10px;
            }
        }

        /* ═══ RESPONSIVE: MOBILE ═══ */
        @media screen and (max-width: 480px) {
            .page-header__title {
                font-size: 1rem;
            }
            body[lang="fa"] .page-header__title {
                font-size: 1rem;
            }
            .cyber-section__header {
                padding: 10px 14px 8px;
            }
            .cyber-section__body {
                padding: 10px 12px 14px;
            }
            .app-card__header {
                flex-direction: column;
                align-items: flex-start;
            }
            .lang-toggle__btn {
                padding: 4px 10px;
                font-size: 0.72rem;
            }
        }
    </style>
</head>

<body lang="fa" dir="rtl">

    <!-- Background data stream -->
    <canvas id="dataStreamCanvas"></canvas>

    <!-- Language toggle -->
    <div class="lang-toggle" id="langToggle" role="group" aria-label="Language selector">
        <button class="lang-toggle__btn active" id="langBtnFa" onclick="setLanguage('fa')" aria-pressed="true">FA</button>
        <button class="lang-toggle__btn" id="langBtnEn" onclick="setLanguage('en')" aria-pressed="false">EN</button>
    </div>

    <!-- Main container -->
    <main class="cyber-container">

        <!-- Page header -->
        <header class="page-header">
            <div class="page-header__corner" aria-hidden="true"></div>
            <h1 class="page-header__title" id="mainTitle">
                <span class="title-text" data-i18n="sub_info">اطلاعات اشتراک</span>
                <span class="typing-cursor" id="typingCursor"></span>
            </h1>
            <p class="page-header__subtitle">{{ user.username }} // NETWATCH PROTOCOL</p>
            <div class="page-header__line" aria-hidden="true"></div>
        </header>

        <!-- User info section -->
        <section class="cyber-section" id="userInfoSection">
            <div class="cyber-section__header">
                <span class="cyber-section__icon" aria-hidden="true">&#9656;</span>
                <h2 class="cyber-section__title" data-i18n="user_data">اطلاعات کاربر</h2>
            </div>
            <div class="cyber-section__body">
                <div class="info-grid">

                    <!-- Username -->
                    <div class="info-row">
                        <span class="info-row__label">
                            <span class="info-row__label-icon" aria-hidden="true">#</span>
                            <span data-i18n="username">نام کاربری</span>
                        </span>
                        <span class="info-row__value">{{ user.username }}</span>
                    </div>

                    <!-- Status -->
                    <div class="info-row">
                        <span class="info-row__label">
                            <span class="info-row__label-icon" aria-hidden="true">&#9670;</span>
                            <span data-i18n="status">وضعیت</span>
                        </span>
                        <span class="info-row__value">
                            <span class="status-badge {% if user.status.value == 'active' %}status-badge--active{% elif user.status.value == 'limited' %}status-badge--limited{% elif user.status.value == 'on_hold' %}status-badge--on_hold{% elif user.status.value == 'expired' %}status-badge--expired{% elif user.status.value == 'disabled' %}status-badge--disabled{% endif %}">
                                <span class="status-badge__dot" aria-hidden="true"></span>
                                <span data-i18n="status_{{ user.status.value }}">{{ user.status.value }}</span>
                            </span>
                        </span>
                    </div>

                    <!-- Data Limit -->
                    <div class="info-row">
                        <span class="info-row__label">
                            <span class="info-row__label-icon" aria-hidden="true">&#9650;</span>
                            <span data-i18n="data_limit">محدودیت حجم</span>
                        </span>
                        <span class="info-row__value">
                            {% if '-unlimit' in user.username %}<span class="infinity" data-i18n="unlimited">نامحدود</span>{% elif not user.data_limit %}<span class="infinity">&infin;</span>{% else %}{{ user.data_limit | bytesformat }}{% endif %}
                        </span>
                    </div>

                    <!-- Data Used -->
                    <div class="info-row">
                        <span class="info-row__label">
                            <span class="info-row__label-icon" aria-hidden="true">&#9660;</span>
                            <span data-i18n="data_used">حجم مصرف‌شده</span>
                        </span>
                        <span class="info-row__value">
                            {% if '-unlimit' in user.username %}<span class="infinity" data-i18n="unlimited">نامحدود</span>{% else %}{{ user.used_traffic | bytesformat }}{% if user.data_limit_reset_strategy != 'no_reset' %}<span class="reset-tag">(<span data-i18n="resets_every">بازنشانی هر</span> {{ user.data_limit_reset_strategy.value }})</span>{% endif %}{% endif %}
                        </span>
                    </div>

                    <!-- Progress bar -->
                    {% if user.data_limit and '-unlimit' not in user.username %}
                    <div class="progress-container">
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" id="dataProgressBar"
                                 data-used="{{ user.used_traffic }}"
                                 data-limit="{{ user.data_limit }}"></div>
                        </div>
                        <div class="progress-label" id="progressLabel">0%</div>
                    </div>
                    {% endif %}

                    <!-- Expiration / On Hold -->
                    <div class="info-row">
                        {% if user.status.value == 'on_hold' %}
                            <span class="info-row__label">
                                <span class="info-row__label-icon" aria-hidden="true">&#9208;</span>
                                <span data-i18n="on_hold_for">مدت تعلیق</span>
                            </span>
                            <span class="info-row__value">
                                {% if not user.on_hold_expire_duration %}<span class="infinity">&infin;</span>{% else %}{{ (user.on_hold_expire_duration / 86400) | int }} <span data-i18n="days">روز</span>{% endif %}
                            </span>
                        {% else %}
                            <span class="info-row__label">
                                <span class="info-row__label-icon" aria-hidden="true">&#9200;</span>
                                <span data-i18n="exp_date">تاریخ انقضا</span>
                            </span>
                            <span class="info-row__value">
                                {% if not user.expire %}
                                    <span class="infinity">&infin;</span>
                                {% else %}
                                    {% set current_datetime = now() %}
                                    {% set remaining_days = ((user.expire - current_datetime).days) %}
                                    {{ user.expire | datetime }}
                                    <span class="days-remaining">
                                        ({{ remaining_days | int }} <span data-i18n="days_remaining">روز باقی‌مانده</span>)
                                    </span>
                                {% endif %}
                            </span>
                        {% endif %}
                    </div>

                    <!-- On Hold Until -->
                    {% if user.status.value == 'on_hold' %}
                    <div class="info-row">
                        <span class="info-row__label">
                            <span class="info-row__label-icon" aria-hidden="true">&#9201;</span>
                            <span data-i18n="on_hold_until">تعلیق تا</span>
                        </span>
                        <span class="info-row__value">
                            {% if user.on_hold_timeout %}{{ user.on_hold_timeout | datetime }}{% else %}<span class="infinity">&infin;</span>{% endif %}
                        </span>
                    </div>
                    {% endif %}

                </div>
            </div>
        </section>

        <!-- Subscription links -->
        {% if user.status in ('active','on_hold') %}
        <section class="cyber-section" id="linksSection">
            <div class="cyber-section__header">
                <span class="cyber-section__icon" aria-hidden="true">&#9656;</span>
                <h2 class="cyber-section__title" data-i18n="sub_links">لینک‌های اشتراک</h2>
            </div>
            <div class="cyber-section__body">
                <div class="link-list">
                    {% for link in links %}
                    <div class="link-item">
                        <span class="link-item__index">{{ loop.index }}</span>
                        <input type="text" class="link-item__input" value="{{ link }}" readonly />
                        <div class="link-item__actions">
                            <button class="btn btn--cyan" onclick="copyLink('{{ link }}', this)" data-i18n="copy">کپی</button>
                            <button class="btn btn--yellow qr-trigger" data-link="{{ link }}" data-i18n="qr_code">کد QR</button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="copy-all-wrapper">
                    <button class="btn btn--primary btn--full" id="copyAllBtn" onclick="copyAllLinks(this)" data-i18n="copy_all">کپی همه لینک‌ها</button>
                </div>
            </div>
        </section>
        {% endif %}

        <!-- Recommended apps grouped by platform -->
        {% if apps %}
        <section class="cyber-section" id="appsSection">
            <div class="apps-section__title">
                <span class="cyber-section__icon" aria-hidden="true">&#9656;</span>
                <span data-i18n="rec_apps">اپلیکیشن‌های پیشنهادی</span>
            </div>

            {% set platforms = [] %}
            {% for app in apps %}
                {% if app.platform and app.platform.value not in platforms %}
                    {% set _ = platforms.append(app.platform.value) %}
                {% endif %}
            {% endfor %}

            {% for platform in platforms %}
            <div class="platform-group">
                <div class="platform-group__header">
                    <span class="platform-group__icon" aria-hidden="true">
                        {% if platform.lower() == 'ios' %}&#63743;{% elif platform.lower() == 'android' %}&#129302;{% elif platform.lower() == 'windows' %}&#128187;{% elif platform.lower() == 'macos' or platform.lower() == 'mac' %}&#128421;{% elif platform.lower() == 'linux' %}&#128039;{% else %}&#128241;{% endif %}
                    </span>
                    <span class="platform-group__name">{{ platform }}</span>
                    <span class="platform-group__count">{{ apps | selectattr('platform') | selectattr('platform.value', 'equalto', platform) | list | length }}</span>
                </div>
                <div class="platform-group__grid">
                    {% for app in apps %}
                    {% if app.platform and app.platform.value == platform %}
                    <article class="app-card {% if app.recommended %}app-card--recommended{% endif %}">
                        <div class="app-card__header">
                            {% if app.icon_url %}
                            <img src="{{ app.icon_url }}" alt="{{ app.name }}" class="app-card__icon" loading="lazy" />
                            {% endif %}
                            <div class="app-card__meta">
                                <h3 class="app-card__name">
                                    {{ app.name }}
                                    {% if app.recommended %}
                                    <span class="app-card__recommended-tag" data-i18n="recommended">پیشنهادی</span>
                                    {% endif %}
                                </h3>
                            </div>
                        </div>
                        <div class="app-card__body">
                            {% if app.description["en"] %}
                            <p class="app-card__desc">{{ app.description["en"] }}</p>
                            {% endif %}
                            {% if app.download_links %}
                            <h4 class="app-card__downloads-title" data-i18n="dl_links">لینک‌های دانلود</h4>
                            <ul class="app-card__links">
                                {% for link in app.download_links %}
                                {% if link.language.value == 'en' %}
                                <li><a href="{{ link.url }}" target="_blank" rel="noopener noreferrer">{{ link.name }}</a></li>
                                {% endif %}
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </div>
                        <div class="app-card__footer">
                            {% if app.import_url %}
                            <button class="app-card__import-btn" onclick="importConfig('{{ app.import_url }}')" data-i18n="import_config">وارد کردن تنظیمات</button>
                            {% endif %}
                        </div>
                    </article>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}

            <!-- Apps without platform -->
            {% set no_platform_apps = apps | rejectattr('platform') | list %}
            {% if no_platform_apps %}
            <div class="platform-group">
                <div class="platform-group__header">
                    <span class="platform-group__icon" aria-hidden="true">&#128241;</span>
                    <span class="platform-group__name" data-i18n="other_platform">سایر</span>
                    <span class="platform-group__count">{{ no_platform_apps | length }}</span>
                </div>
                <div class="platform-group__grid">
                    {% for app in no_platform_apps %}
                    <article class="app-card {% if app.recommended %}app-card--recommended{% endif %}">
                        <div class="app-card__header">
                            {% if app.icon_url %}
                            <img src="{{ app.icon_url }}" alt="{{ app.name }}" class="app-card__icon" loading="lazy" />
                            {% endif %}
                            <div class="app-card__meta">
                                <h3 class="app-card__name">
                                    {{ app.name }}
                                    {% if app.recommended %}
                                    <span class="app-card__recommended-tag" data-i18n="recommended">پیشنهادی</span>
                                    {% endif %}
                                </h3>
                            </div>
                        </div>
                        <div class="app-card__body">
                            {% if app.description["en"] %}
                            <p class="app-card__desc">{{ app.description["en"] }}</p>
                            {% endif %}
                            {% if app.download_links %}
                            <h4 class="app-card__downloads-title" data-i18n="dl_links">لینک‌های دانلود</h4>
                            <ul class="app-card__links">
                                {% for link in app.download_links %}
                                {% if link.language.value == 'en' %}
                                <li><a href="{{ link.url }}" target="_blank" rel="noopener noreferrer">{{ link.name }}</a></li>
                                {% endif %}
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </div>
                        <div class="app-card__footer">
                            {% if app.import_url %}
                            <button class="app-card__import-btn" onclick="importConfig('{{ app.import_url }}')" data-i18n="import_config">وارد کردن تنظیمات</button>
                            {% endif %}
                        </div>
                    </article>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </section>
        {% endif %}

        <!-- Support box -->
        <div class="support-box">
            <span class="support-box__icon" aria-hidden="true">&#9881;</span>
            <p class="support-box__title" data-i18n="support_text">نیاز به کمک دارید؟ با پشتیبانی تماس بگیرید</p>
            <a href="https://t.me/netwatch_vpnbot" target="_blank" rel="noopener noreferrer" class="support-box__link">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
                <span data-i18n="support_btn">پشتیبانی تلگرام</span>
            </a>
        </div>

    </main>

    <!-- QR Code modal -->
    <div class="qr-overlay" id="qrOverlay" role="dialog" aria-modal="true" aria-label="QR Code">
        <div class="qr-modal">
            <button class="qr-modal__close" onclick="closeQrPopup()" aria-label="Close">&times;</button>
            <p class="qr-modal__title" data-i18n="qr_code">کد QR</p>
            <div id="qrCodeContainer"></div>
        </div>
    </div>

    <script>
    (() => {
        'use strict';

        /* ═══════════════════════════════════════
           TRANSLATIONS
           ═══════════════════════════════════════ */
        const T = {
            sub_info:       { fa: 'اطلاعات اشتراک',              en: 'Subscription Information' },
            user_data:      { fa: 'اطلاعات کاربر',               en: 'User Data' },
            username:       { fa: 'نام کاربری',                  en: 'Username' },
            status:         { fa: 'وضعیت',                       en: 'Status' },
            data_limit:     { fa: 'محدودیت حجم',                 en: 'Data Limit' },
            data_used:      { fa: 'حجم مصرف\u200cشده',           en: 'Data Used' },
            exp_date:       { fa: 'تاریخ انقضا',                 en: 'Expiration Date' },
            on_hold_for:    { fa: 'مدت تعلیق',                   en: 'On Hold For' },
            on_hold_until:  { fa: 'تعلیق تا',                    en: 'On Hold Until' },
            sub_links:      { fa: 'لینک\u200cهای اشتراک',        en: 'Subscription Links' },
            copy:           { fa: 'کپی',                         en: 'Copy' },
            copied:         { fa: 'کپی شد!',                     en: 'Copied!' },
            qr_code:        { fa: 'کد QR',                       en: 'QR Code' },
            copy_all:       { fa: 'کپی همه لینک\u200cها',        en: 'Copy All Links' },
            copied_all:     { fa: 'همه کپی شدند!',               en: 'Copied All!' },
            rec_apps:       { fa: 'اپلیکیشن\u200cهای پیشنهادی',  en: 'Recommended Applications' },
            recommended:    { fa: 'پیشنهادی',                    en: 'Recommended' },
            dl_links:       { fa: 'لینک\u200cهای دانلود',        en: 'Download Links' },
            import_config:  { fa: 'وارد کردن تنظیمات',           en: 'Import Config' },
            days_remaining: { fa: 'روز باقی\u200cمانده',         en: 'days remaining' },
            days:           { fa: 'روز',                         en: 'days' },
            resets_every:   { fa: 'بازنشانی هر',                 en: 'resets every' },
            status_active:  { fa: 'فعال',                        en: 'Active' },
            status_limited: { fa: 'محدود',                       en: 'Limited' },
            status_expired: { fa: 'منقضی',                       en: 'Expired' },
            status_disabled:{ fa: 'غیرفعال',                     en: 'Disabled' },
            status_on_hold: { fa: 'تعلیق',                       en: 'On Hold' },
            unlimited:      { fa: 'نامحدود',                     en: 'Unlimited' },
            other_platform: { fa: 'سایر',                         en: 'Other' },
            support_text:   { fa: 'نیاز به کمک دارید؟ با پشتیبانی تماس بگیرید', en: 'Need help? Contact support' },
            support_btn:    { fa: 'پشتیبانی تلگرام',             en: 'Telegram Support' }
        };

        let currentLang = localStorage.getItem('cpLang') || 'fa';

        /* ═══════════════════════════════════════
           LANGUAGE SWITCHING
           ═══════════════════════════════════════ */
        const setLanguage = (lang) => {
            currentLang = lang;
            localStorage.setItem('cpLang', lang);
            const html = document.documentElement;
            const body = document.body;
            const dir = lang === 'fa' ? 'rtl' : 'ltr';
            html.setAttribute('lang', lang);
            html.setAttribute('dir', dir);
            body.setAttribute('lang', lang);
            body.setAttribute('dir', dir);

            document.getElementById('langBtnFa').classList.toggle('active', lang === 'fa');
            document.getElementById('langBtnEn').classList.toggle('active', lang === 'en');
            document.getElementById('langBtnFa').setAttribute('aria-pressed', lang === 'fa');
            document.getElementById('langBtnEn').setAttribute('aria-pressed', lang === 'en');

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (T[key] && T[key][lang]) el.textContent = T[key][lang];
            });
        };
        window.setLanguage = setLanguage;

        /* ═══════════════════════════════════════
           COPY FUNCTIONALITY
           ═══════════════════════════════════════ */
        const doCopy = (text) => {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                return navigator.clipboard.writeText(text);
            }
            return new Promise((resolve, reject) => {
                const ta = document.createElement('textarea');
                ta.value = text;
                ta.style.cssText = 'position:fixed;opacity:0';
                document.body.appendChild(ta);
                ta.select();
                try { document.execCommand('copy'); resolve(); }
                catch (e) { reject(e); }
                finally { document.body.removeChild(ta); }
            });
        };

        const showFeedback = (btn, feedbackKey) => {
            const origKey = btn.getAttribute('data-i18n');
            btn.textContent = T[feedbackKey][currentLang];
            btn.style.boxShadow = '0 0 15px rgba(0,240,255,0.4)';
            setTimeout(() => {
                if (origKey && T[origKey]) btn.textContent = T[origKey][currentLang];
                btn.style.boxShadow = '';
            }, 1500);
        };

        window.copyLink = (link, btn) => {
            doCopy(link).then(() => showFeedback(btn, 'copied')).catch(() => showFeedback(btn, 'copied'));
        };

        window.copyAllLinks = (btn) => {
            const inputs = Array.from(document.querySelectorAll('.link-item__input'));
            if (!inputs.length) return;
            const all = inputs.map(i => i.value).join('\n\n');
            doCopy(all).then(() => showFeedback(btn, 'copied_all')).catch(() => showFeedback(btn, 'copied_all'));
        };

        /* ═══════════════════════════════════════
           QR CODE POPUP
           ═══════════════════════════════════════ */
        const qrOverlay = document.getElementById('qrOverlay');
        const qrContainer = document.getElementById('qrCodeContainer');

        document.querySelectorAll('.qr-trigger').forEach(btn => {
            btn.addEventListener('click', () => {
                const link = btn.dataset.link;
                while (qrContainer.firstChild) qrContainer.removeChild(qrContainer.firstChild);
                new QRCode(qrContainer, {
                    text: link, width: 256, height: 256,
                    colorDark: '#00f0ff', colorLight: '#0a0a0f',
                    correctLevel: QRCode.CorrectLevel.L
                });
                qrOverlay.classList.add('visible');
            });
        });

        window.closeQrPopup = () => qrOverlay.classList.remove('visible');
        qrOverlay.addEventListener('click', e => { if (e.target === qrOverlay) window.closeQrPopup(); });
        document.addEventListener('keydown', e => { if (e.key === 'Escape') window.closeQrPopup(); });

        /* ═══════════════════════════════════════
           IMPORT CONFIG
           ═══════════════════════════════════════ */
        window.importConfig = (url) => window.open(url, '_blank');

        /* ═══════════════════════════════════════
           GLITCH EFFECT
           ═══════════════════════════════════════ */
        const startGlitch = () => {
            const title = document.getElementById('mainTitle');
            if (!title) return;
            const fire = () => {
                title.classList.add('glitch-active');
                setTimeout(() => title.classList.remove('glitch-active'), 300);
                setTimeout(fire, 3000 + Math.random() * 5000);
            };
            setTimeout(fire, 2000);
        };

        /* ═══════════════════════════════════════
           TYPING EFFECT
           ═══════════════════════════════════════ */
        const startTyping = () => {
            const span = document.querySelector('#mainTitle .title-text');
            const cursor = document.getElementById('typingCursor');
            if (!span) return;
            const full = span.textContent;
            span.textContent = '';
            cursor.style.display = 'inline-block';
            let i = 0;
            const iv = setInterval(() => {
                if (i < full.length) { span.textContent += full[i]; i++; }
                else { clearInterval(iv); setTimeout(() => cursor.style.display = 'none', 1200); }
            }, 55);
        };

        /* ═══════════════════════════════════════
           DATA STREAM BACKGROUND
           ═══════════════════════════════════════ */
        const startDataStream = () => {
            const c = document.getElementById('dataStreamCanvas');
            if (!c) return;
            const ctx = c.getContext('2d');
            const cols = [];
            const fs = 12;
            const chars = '01';
            let nc = 0;
            const resize = () => {
                c.width = window.innerWidth;
                c.height = window.innerHeight;
                nc = Math.floor(c.width / fs);
                while (cols.length < nc) cols.push(Math.random() * c.height / fs);
            };
            resize();
            window.addEventListener('resize', resize);
            const draw = () => {
                ctx.fillStyle = 'rgba(6,8,15,0.1)';
                ctx.fillRect(0, 0, c.width, c.height);
                ctx.fillStyle = '#00f0ff';
                ctx.font = fs + 'px monospace';
                for (let i = 0; i < nc; i++) {
                    if (Math.random() > 0.975) {
                        ctx.fillText(chars[Math.floor(Math.random() * chars.length)], i * fs, cols[i] * fs);
                        if (cols[i] * fs > c.height && Math.random() > 0.99) cols[i] = 0;
                        cols[i]++;
                    }
                }
                requestAnimationFrame(draw);
            };
            draw();
        };

        /* ═══════════════════════════════════════
           PROGRESS BAR
           ═══════════════════════════════════════ */
        const animateProgress = () => {
            const bar = document.getElementById('dataProgressBar');
            const label = document.getElementById('progressLabel');
            if (!bar || !label) return;
            const used = parseFloat(bar.dataset.used) || 0;
            const limit = parseFloat(bar.dataset.limit) || 0;
            if (limit <= 0) return;
            const pct = Math.min((used / limit) * 100, 100);
            bar.classList.remove('green', 'yellow', 'red');
            if (pct < 50) bar.classList.add('green');
            else if (pct <= 80) bar.classList.add('yellow');
            else bar.classList.add('red');
            requestAnimationFrame(() => requestAnimationFrame(() => {
                bar.style.width = pct.toFixed(1) + '%';
                label.textContent = pct.toFixed(1) + '%';
            }));
        };

        /* ═══════════════════════════════════════
           INITIALIZATION
           ═══════════════════════════════════════ */
        document.addEventListener('DOMContentLoaded', () => {
            setLanguage(currentLang);
            startTyping();
            startGlitch();
            startDataStream();
            animateProgress();
        });

    })();
    </script>
</body>
</html>
